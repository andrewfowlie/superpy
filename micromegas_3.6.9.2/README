!   We use 'gmake' options in our Makefiles. If you do not have 'gmake' 
!   then more likely your  'make'  is identical to 'gmake'.


I. General  installation.
   Launch
       [g]make 

   It should generate files with compilers flags
       CalcHEP_src/FlagsForMake
       CalcHEP_src/FlagsForSh
   
   and  compile  
       CalcHEP_src/bin/s_calchep 
       sources/micromegas.a

   Possible problems are discussed in Section VII below. 

   micromegas_3.3 was tested for  Linux, and  Darwin
 
II. To work with MSSM, NMSSM, CPVMSSM, IDM, LHM, RHNM, SM4, Z3M  models
    go to the corresponding directory. 

    To generate an executable use
     [g]make main=<source file>
                                                          
    <source file> is expected to be a C  (.c) file, C++ (.cpp) one,
     or a Fortran (.F) file.

    The list of functions you can use in  your programs are described in man/man.pdf as well as
    hep-ph/0405253, hep-ph/0607059, arXiv:0803.2360[hep-ph], arXiv:1005.4133[hep-ph] and arXiv:1305.0237[hep-ph].

 *** For Cygwin, launch an executable with 
    ../cgwRun <exe with parameters>

III. Each model directory  contains at least 2 sample  files: 
      main.c 
      main.F
      a sample for C++  can be obtained by 'cp main.c main.cpp'
 
     main.c and main.F  contain  several independent modules 
     which can be switched ON  by '#define' preprocessor instructions
     at the top of the file.

     The modules are:

   a) MASSES_INFO
       displays mass spectrum for odd particles (super partners) and 
       Higgs particles as well as Higgs widths;
   b) CONSTRAINTS
       checks experimental  constraints;  
   c) HIGGSBOUNDS
	calls HiggsBounds to constrain the Higgs sector;
   d) OMEGA
       computes the relic density;
   e) INDIRECT_DETECTION
       calculates the WIMP annihilation spectra and integrates
       over the halo profile;
   f) RESET_FORMFACTORS
       resets parameters of nucleon form factors, DM velocity 
       distribution, and nucleus Fermi density;
   g) CDM_NUCLEON
       calculates WIMP-nucleon elastic scattering amplitudes;
   h) CDM_NUCLEUS
       calculates the number of events for 1day&1kg  of detector material and 
       recoil energy distribution for WINP-nuclei reaction;
   i) NEUTRINO
	computes the neutrino flux from DM captured in the Sun/Earth and 
	the corresponding muon flux;
   j) DECAYS
	computes the decay widths and branching ratios for any particle;
   k) CROSS_SECTIONS
       calculates cross sections for any 2->2 process
   l) CLEAN
	cleans intermediate files

IV. Each model directory contains a subdirectory  'calchep/' intended 
    for calculation of different cross sections and decay widths 
    in  interactive sessions  for SM and other models.  
        
V.To implement a new model, launch 
    ./newProject  <project name>
      
 Then the directory <project name> will be created with all needed subdirectories 
 and  sample  files inside. Further instructions can be found in the local 
 README file. 
      
VI. To clean all generated files use 
   [g]make clean 
      or  
   ./clean 
   launched from micromegas_3.X directory. In each model directory you 
   can call 
     [g]make clean 
   to remove all generated files in this particular directory.

VII. Compilers and  their Flags
    Options for compilation are stored in the file 
       CalcHEP_src/FlagsForSh   
    If this files does not exist, it is generated by [g]make according 
    to Unix version. If CalcHEP_src/FlagsForSh exists, [g]make
    only checks it.  In case of problem with compilers and their flags 
    one can improve CalcHEP_src/FlagsForSh and launch [g]make again.
    Using 
         [g]make clean 
    you will be asked about an option to save FlagsForSh for the next
    compilation.  
        [g]make flags
    only generates FlagsForSh file. It gives you an option to 
    select the compiler and flags you prefer. 

    Special requirements, but not strictly necessary.
     1) To see graphical plots generated by micrOMEGAS and work with CalcHEP
        graphical interface,   X11 development package should be installed. 
        One can check that directory   /usr/include/X11  contains *.h files. 
        If not, CalcHEP  will be compiled in 'blind' mode and
        CalcHEP/FlagsForSh will contain empty definition of LX11 variable. 
          LX11=""
        The name of package which has to be installed to solve the problem
        depends on platform
           libX11-devel     for  Fedora/Scientific, Darwin(MAC)
           libX11-dev       for  Ubuntu/Debian
           xorg-x11-devel   for  SUSE
      2) CalcHEP interactive section needs   'xterm' command.     
 

VIII. Citation and information   

1.%\cite{Belanger:2013oya}
\bibitem{Belanger:2013oya}
  G.~Belanger, F.~Boudjema, A.~Pukhov and A.~Semenov,
  %``micrOMEGAs3.1 : a program for calculating dark matter oservables,''
  arXiv:1305.0237 [hep-ph].
  %%CITATION = ARXIV:1305.0237;%%

2. %\cite{Belanger:2010gh}
\bibitem{Belanger:2010gh}
    G.~Belanger, F.~Boudjema, P.~Brun, A.~Pukhov, S.~Rosier-Lees, P.~Salati and A.~Semenov,
    %``Indirect search for dark matter with micrOMEGAs2.4,''
    Comput.\ Phys.\ Commun.\  {\bf 182} (2011) 842
    [arXiv:1004.1092 [hep-ph]].
    %%CITATION = ARXIV:1004.1092;%%
  
3.%\cite{Belanger:2008sj}
  \bibitem{Belanger:2008sj}
  G.~Belanger, F.~Boudjema, A.~Pukhov and A.~Semenov,
  %`Dark matter direct detection rate in a generic model with micrOMEGAs2.1,''
  arXiv:0803.2360 [hep-ph].
  %%CITATION = ARXIV:0803.2360;%%

4.%\cite{Belanger:2006is}
  \bibitem{Belanger:2006is}
  G.~Belanger, F.~Boudjema, A.~Pukhov and A.~Semenov,
  %`micrOMEGAs2.0: A program to calculate the relic density of dark matter  in
  %a generic model,''
  Comput.\ Phys.\ Commun.\  {\bf 176} (2007) 367
  [arXiv:hep-ph/0607059].

  Other citations needed for specific models are listed in model/README files. 

IX.   WEB address:
       http://lapth.cnrs.fr/micromegas

X. Help 
  Send an e-mail to micro.omegas@lapth.cnrs.fr 
